<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Horario Feria</title>

<!-- Favicons y manifest -->
<link rel="icon" href="favicon.ico" type="image/x-icon">
<link rel="icon" type="image/png" sizes="32x32" href="favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon-16x16.png">

<!-- Para m√≥viles -->
<link rel="apple-touch-icon" href="apple-touch-icon.png">

<!-- Android / ‚ÄúA√±adir a pantalla de inicio‚Äù -->
<link rel="manifest" href="site.webmanifest">

<script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

<style>
:root{
  --bg1:#e3f2fd;
  --accent:#1976d2;
  --card-bg:#fff;
  --shadow:0 8px 30px rgba(0,0,0,0.12);
  --maxw:620px;
}

*{box-sizing:border-box}

body{
  font-family:'Segoe UI', Arial, sans-serif;
  background:linear-gradient(135deg,var(--bg1),#fff);
  margin:0;
  min-height:100vh;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  padding:32px;
  color:#1a237e;
}

.container{
  background:var(--card-bg);
  max-width:var(--maxw);
  width:100%;
  padding:28px;
  border-radius:16px;
  box-shadow:var(--shadow);
  animation:fadeIn .36s ease;
}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(12px)}
  to{opacity:1;transform:none}
}

h2{
  text-align:center;
  color:var(--accent);
  margin-bottom:20px;
}

.field-group{margin-bottom:16px}

label{
  display:block;
  margin-bottom:6px;
  font-weight:600;
  color:#333;
}

input, select{
  width:100%;
  padding:10px 12px;
  border:1px solid #cfd8dc;
  border-radius:10px;
  font-size:15px;
}

input[readonly]{background:#f5fbff}

input:focus, select:focus{
  outline:none;
  border-color:var(--accent);
  box-shadow:0 0 0 4px rgba(25,118,210,0.12);
}

.btn-principal{
  width:100%;
  padding:13px;
  border-radius:10px;
  border:none;
  background:var(--accent);
  color:#fff;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
}

.btn-principal:hover{transform:scale(1.02)}

.btn-volver{
  margin-top:40px;
  padding:14px 32px;
  font-size:1.2rem;
  font-weight:bold;
  color:white;
  background:#607d8b;
  border:none;
  border-radius:10px;
  cursor:pointer;
  box-shadow:0 4px 12px rgba(0,0,0,0.2);
  width:auto;              
  display:inline-block;    
}

@media(max-width:640px){
  body{padding:20px}
  .container{padding:20px}
}
</style>
</head>

<body>

<div class="container" id="captura">
  <h2>‚è∞ Horario Feria ‚è∞</h2>

  <div class="field-group">
    <label>Inicio de feria</label>
    <input type="time" id="inicio">
  </div>

  <div class="field-group">
    <label>Llegada al colegio</label>
    <input type="time" id="llegada" readonly>
  </div>

  <div class="field-group">
    <label>T. trayecto</label>
    <select id="trayecto"></select>
  </div>

  <div class="field-group">
    <label>Salir de Biar</label>
    <input type="time" id="salida" readonly>
  </div>

  <div class="field-group">
    <label>Me despierto</label>
    <input type="time" id="despierto" readonly>
  </div>

  <button class="btn-principal" onclick="hacerCaptura()">üì∏ Captura de pantalla üì∏</button>
</div>

<button class="btn-volver" onclick="window.location.href='index.html'">
‚Üê Volver al Men√∫
</button>

<script>
const inicio=document.getElementById("inicio");
const llegada=document.getElementById("llegada");
const trayecto=document.getElementById("trayecto");
const salida=document.getElementById("salida");
const despierto=document.getElementById("despierto");

for(let i=5;i<=180;i+=5){
  const o=document.createElement("option");
  o.value=i;
  o.textContent=i<60?`${i} minutos`:`${Math.floor(i/60)}h ${i%60}m`;
  trayecto.appendChild(o);
}

function restar(h,m){
  let[hh,mm]=h.split(":").map(Number);
  let t=hh*60+mm-m;
  if(t<0)t+=1440;
  return `${String(Math.floor(t/60)).padStart(2,"0")}:${String(t%60).padStart(2,"0")}`;
}

function calcular(){
  if(!inicio.value)return;
  llegada.value=restar(inicio.value,60);
  if(trayecto.value){
    salida.value=restar(llegada.value,parseInt(trayecto.value));
    despierto.value=restar(salida.value,60);
  }
}

inicio.addEventListener("change",calcular);
trayecto.addEventListener("change",calcular);

function hacerCaptura(){
  html2canvas(document.getElementById("captura")).then(c=>{
    const a=document.createElement("a");
    a.download="horario_feria.png";
    a.href=c.toDataURL();
    a.click();
  });
}
</script>

</body>
</html>
